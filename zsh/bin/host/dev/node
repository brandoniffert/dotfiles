#!/bin/bash

set -e

if [ -t 1 ] ; then
  # Use docker if command is ran interactively by user
  image=node:lts

  docker run -it --rm \
    -u "$(id -u):$(id -g)" \
    -v "$PWD":/app \
    -w /app \
    $image \
    "$@"
else
  # Otherwise, fallback to n-installed node
  $N_PREFIX/bin/node "$@"
fi
